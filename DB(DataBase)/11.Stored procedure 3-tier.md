# Three-tier architecture
- presentation tier: 사용자에게 보여지는 부분을 담당하는 부분
- logic tier: 서비스와 관련된 기능과 정책 등등 비지니스 로직을 담당하는 부분
- data tier: 데이터를 저장하고 관리하고 제공하는 역할을 하는 부분

## 비지니스 로직이란
- 예를 들어 당근마켓
  - 회원 가입/탈퇴
  - 상품 리스트업 알고리즘
  - 상품 정보 업로드 기능
  - 상품 검색 기능
  - 메시지 기능 ...
- 데이터
  - 회원 정보
  - 상품 정보
  - 판매/구매 내역
  - 지역 정보 ...

## Stored procedure 사용시 장점
- application에 transparent하다.
- 비지니스 로직이 프로시저에서 만들어지고 로직 티어에서 호출해서 사용하면 되기 때문에 편리하다. 변경하고 싶을 때에는 프로시저의 바디 부분만 바꿔주면 된다.
- network traffic을 줄여서 응답 속도를 향상시킬 수 있다. 로직 티어에서 호출하면 프로시저 안에서 처리를 하고 난 뒤 결과 값을 보내주기 때문에 속도를 줄일 수 있다.
- 여러 서비스에서 재사용 가능하다. 
- 민감한 정보에 대한 접근을 제한할 수 있다. 프로시저에 접근하는 것은 허용한다.

## Stored procedure 사용시 단점
- 사용하게 되면 유지 관리 보수 비용이 커진다. 버전 관리를 둘 다 해줘야 한다.(procedure & logic tier)
- DB서버를 추가하는 것은 간단한 작업이 아니다. 트래픽이 급증하게 될 경우 logic tier에 application 서버 투입을 하는 방법을 사용한다.
- stored procedure가 언제나 transparent인건 아니다. 
- tranparent 하다고 무조건 좋은 것도 아니다. 버그가 있었던 동안의 받은 트래픽들은 문제가 있을 것이다.
- 재사용 가능한것은 안좋을수도 있다. 요청이 많아지면서 트래픽이 많아지면 과부하가 생기기 때문에 문제가 발생할 수 있다.
- 비지니스 로직을 로직 티어 (소스 코드)에 두고도 응답 속도를 향상 시킬 수 있다. 동시에 진행을 시키는 방법이 있다. 캐시를 사용하는 방법도 있다. 캐시를 사용하면 응답 속도도 향상 시키면서 DB 부하도 줄일 수 있다.
- 민감한 정보에 대한 접근을 완벽하게 제한할 수는 없다.
- DB, 테이블 접근을 막으면 개발, CS 업무의 신속함이 떨어지기 때문에 담당자나 개발자에게만 DB혹은 테이블 권한을 부여하고 민감한 정보는 암호화해서 저장하는게 좋고 보안서약서 등을 통해 정책적으로 보안을 강화하는게 좋다.



































