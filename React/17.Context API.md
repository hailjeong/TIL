# Context API

- ë¦¬ì•¡íŠ¸ í”„ë¡œì íŠ¸ì—ì„œ ì „ì—­ì ìœ¼ë¡œ ì‚¬ìš©í•  ë°ì´í„°ê°€ ìˆì„ ë•Œ ìœ ìš©í•œ ê¸°ëŠ¥ì´ë‹¤. ë¦¬ì•¡íŠ¸ ê´€ë ¨ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œë„ ë§ì´ ì‚¬ìš©ë˜ê³  ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë¦¬ë•ìŠ¤, ë¦¬ì•¡íŠ¸ ë¼ìš°í„°, styled-components ë“±ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” Context APIë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„ë˜ì–´ ìˆë‹¤.
- ìƒˆ Contextë¥¼ ë§Œë“¤ ë•ŒëŠ” "createContext" í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤. 
- ìƒ‰ìƒì„ propsë¡œ ë°›ì•„ ì˜¤ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ColorContext ì•ˆì— ìˆëŠ” Consumerë¼ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ í†µí•´ ìƒ‰ìƒì„ ì¡°íšŒ í•œë‹¤.
- providerë¥¼ ì‚¬ìš©í•˜ë©´ Contextì˜ valueë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.

```javascript
// contexts/color.js ì»´í¬ë„ŒíŠ¸
import { createContext } from "react";
const ColorContext = createContext({ color: "black" });
export default ColorContext;

// components/ColorBox.js ì»´í¬ë„ŒíŠ¸
import ColorContext from "../contexts/color";

const ColorBox = () => {
  return (
    <ColorContext.Consumer>
      {(value) => (
        <div
          style={{ width: "64px", height: "64px", background: value.color }}
        />
      )}
    </ColorContext.Consumer>
  );
};
export default ColorBox;

// App.js ì»´í¬ë„ŒíŠ¸
import ColorBox from "./components/ColorBox";
import ColorContext from "./contexts/color";

const App = () => {
  return (
    <ColorContext.Provider value={{ color: "red" }}>
      <div>
        <ColorBox />
      </div>
    </ColorContext.Provider>
  );
};

export default App;
```

## ë™ì  Context ì‚¬ìš©í•˜ê¸°
- contextì˜ valueì—ëŠ” ë¬´ì¡°ê±´ ìƒíƒœ ê°’ë§Œ ìˆì–´ì•¼ í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤. í•¨ìˆ˜ë¥¼ ì „ë‹¬í•´ ì¤„ ìˆ˜ë„ ìˆë‹¤.
- ColorProviderë¼ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒˆë¡œ ì‘ì„±í•´ì£¼ê³  ì´ ì»´í¬ë„ŒíŠ¸ì—ì„œ ColorContext.Providerë¥¼ ë Œë”ë§í•˜ê³  ìˆë‹¤. valueì—ëŠ” ìƒíƒœ ê°’ stateì™€ ì—…ë°ì´íŠ¸í•¨ìˆ˜ actionsë¡œ ë¬¶ì–´ì„œ ì „ë‹¬ í•˜ê³  ìˆë‹¤.
- ë°˜ë“œì‹œ ë¬¶ì–´ì¤„ í•„ìš”ëŠ” ì—†ì§€ë§Œ stateì™€ actionsê°ì²´ë¥¼ ë”°ë¡œë”°ë¡œ ë¶„ë¦¬í•´ì£¼ë©´ ë‚˜ì¤‘ì— ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì—ì„œ Contextì˜ ê°’ì„ ì‚¬ìš©í•  ë•Œ í¸í•˜ë‹¤.
```javascript
import { createContext, useState } from "react";

const ColorContext = createContext({
  state: { color: "black", subcolor: "red" },
  actions: {
    setColor: () => {},
    setSubcolor: () => {},
  },
});

const ColorProvider = ({ children }) => {
  const [color, setColor] = useState("black");
  const [subcolor, setSubcolor] = useState("red");

  const value = {
    state: { color, subcolor },
    actions: { setColor, setSubcolor },
  };
  return (
    <ColorContext.Provider value={value}>{children}</ColorContext.Provider>
  );
};

// const ColorConsumer = ColorContext.Consumerì™€ ê°™ì€ ì˜ë¯¸
const { Consumer: ColorConsumer } = ColorContext;

// ColorProviderì™€ ColorConsumer ë‚´ë³´ë‚´ê¸°
export { ColorProvider, ColorConsumer };

export default ColorContext;
```

## ìƒ‰ìƒ ì„ íƒ
```javascript
// SelectColors.js ì»´í¬ë„ŒíŠ¸
import { ColorConsumer } from "../contexts/color";

const colors = ["red", "orange", "yellow", "green", "blue", "indigo", "violet"];

const SelectColors = () => {
  return (
    <div>
      <h2>ìƒ‰ìƒì„ ì„ íƒí•´ì£¼ì„¸ìš”.</h2>
      <ColorConsumer>
        {({ actions }) => (
          <div style={{ display: "flex" }}>
            {colors.map((color) => (
              <div
                key={color}
                style={{
                  background: color,
                  width: "24px",
                  height: "24px",
                  cursor: "pointer",
                }}
                onClick={() => actions.setColor(color)}
                onContextMenu={(e) => {
                  e.preventDefault(); // ë§ˆìš°ìŠ¤ ì˜¤ë¥¸ìª½ ë²„íŠ¼ í´ë¦­ ì‹œ ë©”ë‰´ê°€ ëœ¨ëŠ”ê²ƒì„ ë¬´ì‹œí•¨
                  actions.setSubcolor(color);
                }}
              />
            ))}
          </div>
        )}
      </ColorConsumer>
      <hr />
    </div>
  );
};
export default SelectColors;

// App.js ì»´í¬ë„ŒíŠ¸
import ColorBox from "./components/ColorBox";
import SelectColors from "./components/SelectColors";
import { ColorProvider } from "./contexts/color";

const App = () => {
  return (
    <ColorProvider value={{ color: "red" }}>
      <div>
        <SelectColors />
        <ColorBox />
      </div>
    </ColorProvider>
  );
};

export default App;
```

## Consumer ëŒ€ì‹  Hook || static contextType
- í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•  ë•Œ Hooksì¤‘ì— useContextì„ ì‚¬ìš©í•˜ë©´ ë”ìš± ê°„ë‹¨í•˜ê²Œ ì½”ë“œë¥¼ ì§¤ ìˆ˜ ìˆë‹¤.
- í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” static contextTypeì„ ì •ì˜í•˜ëŠ” ë°©ë²•ì´ ìˆë‹¤.
```javascript
// ColorBox.js ì»´í¬ë„ŒíŠ¸
import { useContext } from "react";
import ColorContext from "../contexts/color";

const ColorBox = () => {
  const { state } = useContext(ColorContext);
  return (
    <>
      <div
        style={{
          width: "64px",
          height: "64px",
          background: state.color,
        }}
      />
      <div
        style={{
          width: "32px",
          height: "32px",
          background: state.subcolor,
        }}
      />
    </>
  );
};
export default ColorBox;
```
```javascript
// classí˜• ì»´í¬ë„ŒíŠ¸ SelectColors.js 
const colors = ["red", "orange", "yellow", "green", "blue", "indigo", "violet"];

class SelectColors extends Component {
  static contextType = ColorContext;

  handleSetColor = (color) => {
    this.context.actions.setColor(color);
  };

  handleSetSubcolor = (subcolor) => {
    this.context.actions.setSubcolor(subcolor);
  };

  render() {
    return (
      <div>
        <h2>ìƒ‰ìƒì„ ì„ íƒí•˜ì„¸ìš”</h2>
        <div style={{ display: "flex" }}>
          {colors.map((color) => (
            <div
              key={color}
              style={{
                background: color,
                width: "24px",
                height: "24px",
                cursor: "pointer",
              }}
              onClick={() => this.handleSetColor(color)}
              onContextMenu={(e) => {
                e.preventDefault();
                this.handleSetSubcolor(color);
              }}
            />
          ))}
        </div>
        <hr />
      </div>
    );
  }
}
export default SelectColors;
```

## ì •ë¦¬ğŸ§‘â€ğŸ’»
- ê¸°ì¡´ì— ë°°ìš¸ ë•Œ ì»´í¬ë„ŒíŠ¸ ê°„ì— ìƒíƒœë¥¼ êµë¥˜í•  ë•Œ ë¶€ëª¨ -> ìì‹ íë¦„ìœ¼ë¡œ ì „ë‹¬ì„ í•´ì£¼ì—ˆëŠ”ë° Context APIë¥¼ í†µí•´ ë”ìš± ì‰½ê²Œ ìƒíƒœë¥¼ êµë¥˜í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤. êµ¬ì¡°ê°€ ê°„ë‹¨í•˜ê³  ìƒíƒœì˜ ì¢…ë¥˜ê°€ ê·¸ë‹¤ì§€ ë§ì§€ ì•Šìœ¼ë©´ êµ³ì´ Contextë¥¼ ì‚¬ìš©í•  í•„ìš”ëŠ” ì—†ì§€ë§Œ ì „ì—­ì ìœ¼ë¡œ ì—¬ê¸°ì €ê¸°ì—ì„œ ì‚¬ìš©ë˜ëŠ” ìƒíƒœê°€ ìˆê³  ì»´í¬ë„ŒíŠ¸ì˜ ê°œìˆ˜ê°€ ë§ì€ ìƒí™©ì´ë¼ë©´, Context APIë¥¼ ì‚¬ìš©í•˜ëŠ”ê²ƒì´ ì¢‹ë‹¤.




















